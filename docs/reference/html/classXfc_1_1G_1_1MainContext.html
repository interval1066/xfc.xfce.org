<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>



  
  
  
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">



  
  
  
  
  
  
  <title>Xfce Foundation Classes</title>
  <meta content="XFC Reference Manual" name="description">



  
  
  
  <meta content="The XFC Development Team" name="author">



  
  
  
  <link rel="stylesheet" href="doxygen.css" type="text/css">
</head>


<body>



<table style="text-align: left; width: 100%;" border="0" cellpadding="0" cellspacing="0">



  <tbody>



    <tr>



      <td style="background-color: rgb(21, 67, 116); text-align: center; height: 25px;"><span style="color: rgb(255, 255, 192); font-weight: bold; font-family: Helvetica,Arial,sans-serif;"><br>



      </span></td>



    </tr>



    <tr>



      <td style="text-align: center; background-color: rgb(255, 255, 255); height: 25px;"><span style="font-weight: bold; font-family: Helvetica,Arial,sans-serif; color: rgb(17, 55, 95);">Xfce
Foundation Classes</span><br>



      </td>



    </tr>



    <tr style="font-family: Helvetica,Arial,sans-serif;">



      <td style="height: 25px; text-align: center; background-color: rgb(153, 169, 192);"><font size="-1"><a class="qindexH" href="../../index.html">Main Page</a>&nbsp;
| <a class="qindexH" href="index.html">Index</a> |&nbsp; <a class="qindexH" href="namespaces.html">Namespace
List</a>&nbsp; |&nbsp; <a class="qindexH" href="classes.html">Alphabetical
List</a>&nbsp;
|&nbsp; <a class="qindexH" href="annotated.html">Class List</a>&nbsp;
|&nbsp; <a class="qindexH" href="files.html">File List</a></font> </td>



    </tr>



  
  
  
  </tbody>
</table>



<br>



<br>



</body>
</html>
<!-- Generated by Doxygen 1.5.1 -->
<div class="nav">
<a class="el" href="namespaceXfc.html">Xfc</a>::<a class="el" href="namespaceXfc_1_1G.html">G</a>::<a class="el" href="classXfc_1_1G_1_1MainContext.html">MainContext</a></div>
<h1>Xfc::G::MainContext Class Reference</h1><!-- doxytag: class="Xfc::G::MainContext" --><!-- doxytag: inherits="Xfc::Trackable" -->A C++ interface for the GMainContext.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;xfc/glib/main.hh&gt;</code>
<p>
<p>Inheritance diagram for Xfc::G::MainContext:
<p><center><img src="classXfc_1_1G_1_1MainContext.png" usemap="#Xfc::G::MainContext_map" border="0" alt=""></center>
<map name="Xfc::G::MainContext_map">
<area href="classXfc_1_1Trackable.html" alt="Xfc::Trackable" shape="rect" coords="0,0,123,24">
</map>
<a href="classXfc_1_1G_1_1MainContext-members.html">List of all members.</a><h2>Public Member Functions</h2>
<tr><td colspan="2"><div class="groupHeader">Accessors</div></td></tr>
<ul>
<li><a class="anchor" name="2529d002ce3d391b192f0ee219290d7b"></a><!-- doxytag: member="Xfc::G::MainContext::g_main_context" ref="2529d002ce3d391b192f0ee219290d7b" args="() const" -->
GMainContext * <a class="el" href="classXfc_1_1G_1_1MainContext.html#2529d002ce3d391b192f0ee219290d7b">g_main_context</a> () const
<dl class="el"><dd class="mdescRight">Get a pointer to the GMainContext object. <br></dl><li><a class="anchor" name="5862a99699e8251d6c355266847c6ee8"></a><!-- doxytag: member="Xfc::G::MainContext::operator GMainContext *" ref="5862a99699e8251d6c355266847c6ee8" args="() const" -->
<a class="el" href="classXfc_1_1G_1_1MainContext.html#5862a99699e8251d6c355266847c6ee8">operator GMainContext *</a> () const
<dl class="el"><dd class="mdescRight">Conversion operator; Safely converts a <a class="el" href="classXfc_1_1G_1_1MainContext.html">G::MainContext</a> object into a GMainContext pointer. <br></dl><li>bool <a class="el" href="classXfc_1_1G_1_1MainContext.html#a7c04d1d7cd2c6e49d1360663fd69378">pending</a> () const
<dl class="el"><dd class="mdescRight">Checks if any sources have pending events for the given context.  <a href="#a7c04d1d7cd2c6e49d1360663fd69378"></a><br></dl><li>GPollFunc <a class="el" href="classXfc_1_1G_1_1MainContext.html#a2e607e63e0ccac5881eedacfce2990f">get_poll_func</a> () const
<dl class="el"><dd class="mdescRight">Gets the poll function set by <a class="el" href="classXfc_1_1G_1_1MainContext.html#9cc66ac314c93b1f05a1e5a3b08d97b7">set_poll_func()</a>.  <a href="#a2e607e63e0ccac5881eedacfce2990f"></a><br></dl></ul>
<tr><td colspan="2"><div class="groupHeader">Methods</div></td></tr>
<ul>
<li><a class="anchor" name="01e5100e936ba0446653c3712857b0f0"></a><!-- doxytag: member="Xfc::G::MainContext::ref" ref="01e5100e936ba0446653c3712857b0f0" args="()" -->
virtual void <a class="el" href="classXfc_1_1G_1_1MainContext.html#01e5100e936ba0446653c3712857b0f0">ref</a> ()
<dl class="el"><dd class="mdescRight">Increases the reference count of the main context by one. <br></dl><li>virtual void <a class="el" href="classXfc_1_1G_1_1MainContext.html#18927522b935969fad0e2bca1a1f47dd">unref</a> ()
<dl class="el"><dd class="mdescRight">Decreases the reference count of the main context by one.  <a href="#18927522b935969fad0e2bca1a1f47dd"></a><br></dl><li>bool <a class="el" href="classXfc_1_1G_1_1MainContext.html#4f2cbbf733fe68d4f44f885330815d68">iteration</a> (bool may_block)
<dl class="el"><dd class="mdescRight">Runs a single iteration of the main loop.  <a href="#4f2cbbf733fe68d4f44f885330815d68"></a><br></dl><li><a class="el" href="classXfc_1_1Pointer.html">Pointer</a>&lt; <a class="el" href="classXfc_1_1G_1_1Source.html">Source</a> &gt; <a class="el" href="classXfc_1_1G_1_1MainContext.html#0b987ad023e62077cc96eedd40d2f9f1">find_source</a> (unsigned int source_id)
<dl class="el"><dd class="mdescRight">Finds a <a class="el" href="classXfc_1_1G_1_1Source.html">Source</a> given the source ID.  <a href="#0b987ad023e62077cc96eedd40d2f9f1"></a><br></dl><li><a class="anchor" name="011dff57082126d5cceb9b5609f9a0b2"></a><!-- doxytag: member="Xfc::G::MainContext::wakeup" ref="011dff57082126d5cceb9b5609f9a0b2" args="()" -->
void <a class="el" href="classXfc_1_1G_1_1MainContext.html#011dff57082126d5cceb9b5609f9a0b2">wakeup</a> ()
<dl class="el"><dd class="mdescRight">If the context is currently waiting in a poll(), interrupt the poll(), and continue the iteration process. <br></dl><li>bool <a class="el" href="classXfc_1_1G_1_1MainContext.html#f40acad9a7780c5dd6e90cbbeaf61101">acquire</a> ()
<dl class="el"><dd class="mdescRight">Tries to become the owner of the context.  <a href="#f40acad9a7780c5dd6e90cbbeaf61101"></a><br></dl><li>void <a class="el" href="classXfc_1_1G_1_1MainContext.html#96d62d03a808cb0488effb298360ee60">release</a> ()
<dl class="el"><dd class="mdescRight">Releases ownership of the context previously acquired by this thread with <a class="el" href="classXfc_1_1G_1_1MainContext.html#f40acad9a7780c5dd6e90cbbeaf61101">acquire()</a>.  <a href="#96d62d03a808cb0488effb298360ee60"></a><br></dl><li>bool <a class="el" href="classXfc_1_1G_1_1MainContext.html#77298979d4d5dda0bc6aea553c0576ee">wait</a> (<a class="el" href="classXfc_1_1G_1_1Condition.html">Condition</a> &amp;condition, <a class="el" href="classXfc_1_1G_1_1Mutex.html">Mutex</a> &amp;mutex)
<dl class="el"><dd class="mdescRight">Tries to become the owner of the specified context, as with <a class="el" href="classXfc_1_1G_1_1MainContext.html#f40acad9a7780c5dd6e90cbbeaf61101">acquire()</a>, but if another thread is the owner, atomically drop mutex and wait on <em>condition</em> until that owner releases ownership or until <em>conditon</em> is signaled, then try again (once) to become the owner.  <a href="#77298979d4d5dda0bc6aea553c0576ee"></a><br></dl><li>bool <a class="el" href="classXfc_1_1G_1_1MainContext.html#7490dba8a0387ffa44c1c3aea5a9892c">prepare</a> (int *priority)
<dl class="el"><dd class="mdescRight">Prepares to poll sources within a main loop.  <a href="#7490dba8a0387ffa44c1c3aea5a9892c"></a><br></dl><li>bool <a class="el" href="classXfc_1_1G_1_1MainContext.html#f738f0b385361061d5e8011391e93c0d">query</a> (int max_priority, int *timeout, std::vector&lt; <a class="el" href="classXfc_1_1G_1_1PollFD.html">PollFD</a> &gt; &amp;fds)
<dl class="el"><dd class="mdescRight">Determines the information necessary to poll the main loop.  <a href="#f738f0b385361061d5e8011391e93c0d"></a><br></dl><li>int <a class="el" href="classXfc_1_1G_1_1MainContext.html#b3b4f42d123e49ed04e665cc812f1881">check</a> (int max_priority, std::vector&lt; <a class="el" href="classXfc_1_1G_1_1PollFD.html">PollFD</a> &gt; &amp;fds)
<dl class="el"><dd class="mdescRight">Passes the results of polling back to the main loop.  <a href="#b3b4f42d123e49ed04e665cc812f1881"></a><br></dl><li><a class="anchor" name="b0cfe3c2d33a67d079255cadb375eafb"></a><!-- doxytag: member="Xfc::G::MainContext::dispatch" ref="b0cfe3c2d33a67d079255cadb375eafb" args="()" -->
void <a class="el" href="classXfc_1_1G_1_1MainContext.html#b0cfe3c2d33a67d079255cadb375eafb">dispatch</a> ()
<dl class="el"><dd class="mdescRight">Dispatches all pending sources. <br></dl><li>void <a class="el" href="classXfc_1_1G_1_1MainContext.html#365bf54083e18720dd8f6d4a3f697f15">add_poll</a> (<a class="el" href="classXfc_1_1G_1_1PollFD.html">PollFD</a> &amp;fd, int priority)
<dl class="el"><dd class="mdescRight">Adds a file descriptor to the set of file descriptors polled for this context.  <a href="#365bf54083e18720dd8f6d4a3f697f15"></a><br></dl><li>void <a class="el" href="classXfc_1_1G_1_1MainContext.html#4617d93b0e174df7cea797d9b7fdeea9">remove_poll</a> (<a class="el" href="classXfc_1_1G_1_1PollFD.html">PollFD</a> &amp;fd)
<dl class="el"><dd class="mdescRight">Removes the file descriptor from the set of file descriptors to be polled for the context.  <a href="#4617d93b0e174df7cea797d9b7fdeea9"></a><br></dl><li>void <a class="el" href="classXfc_1_1G_1_1MainContext.html#9cc66ac314c93b1f05a1e5a3b08d97b7">set_poll_func</a> (GPollFunc func)
<dl class="el"><dd class="mdescRight">Sets the function to use to handle the polling of file descriptors.  <a href="#9cc66ac314c93b1f05a1e5a3b08d97b7"></a><br></dl></ul>
<h2>Static Public Member Functions</h2>
<tr><td colspan="2"><div class="groupHeader">Accessors</div></td></tr>
<ul>
<li>static <a class="el" href="classXfc_1_1Pointer.html">Pointer</a>&lt; <a class="el" href="classXfc_1_1G_1_1MainContext.html">MainContext</a> &gt; <a class="el" href="classXfc_1_1G_1_1MainContext.html#fdc34ceaaa1d15bed1c020874e9f2259">get_default</a> ()
<dl class="el"><dd class="mdescRight">Gets the default main context.  <a href="#fdc34ceaaa1d15bed1c020874e9f2259"></a><br></dl></ul>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A C++ interface for the GMainContext. 
<p>
<a class="el" href="classXfc_1_1G_1_1MainContext.html">MainContext</a> is an object representing a set of sources to be handled in a main loop. Different main contexts should be used for different threads. Single iterations of a main context can be run with <a class="el" href="classXfc_1_1G_1_1MainContext.html#4f2cbbf733fe68d4f44f885330815d68">iteration()</a>.<p>
In some cases, more detailed control of exactly how the details of the main loop work is desired, for instance, when integrating the <a class="el" href="classXfc_1_1G_1_1MainLoop.html">G::MainLoop</a> with an external main loop. In such cases, you can call the component methods of <a class="el" href="classXfc_1_1G_1_1MainContext.html#4f2cbbf733fe68d4f44f885330815d68">iteration()</a> directly. These methods are <a class="el" href="classXfc_1_1G_1_1MainContext.html#7490dba8a0387ffa44c1c3aea5a9892c">prepare()</a>, <a class="el" href="classXfc_1_1G_1_1MainContext.html#f738f0b385361061d5e8011391e93c0d">query()</a>, <a class="el" href="classXfc_1_1G_1_1MainContext.html#b3b4f42d123e49ed04e665cc812f1881">check()</a> and <a class="el" href="classXfc_1_1G_1_1MainContext.html#b0cfe3c2d33a67d079255cadb375eafb">dispatch()</a>, and must be called in that sequence. The sequence can be stopped at any time, and you can return to <a class="el" href="classXfc_1_1G_1_1MainContext.html#7490dba8a0387ffa44c1c3aea5a9892c">prepare()</a>, but you must never skip a step or call one of the methods twice (except for <a class="el" href="classXfc_1_1G_1_1MainContext.html#f738f0b385361061d5e8011391e93c0d">query()</a>).<p>
Whenever <a class="el" href="classXfc_1_1G_1_1MainContext.html#7490dba8a0387ffa44c1c3aea5a9892c">prepare()</a> is invoked, any pending sources are cleared, and checking starts again from scratch. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="11febfb9b354f1045bb57636beeb161b"></a><!-- doxytag: member="Xfc::G::MainContext::MainContext" ref="11febfb9b354f1045bb57636beeb161b" args="(GMainContext *context, bool owns_reference=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Xfc::G::MainContext::MainContext           </td>
          <td>(</td>
          <td class="paramtype">GMainContext *&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>owns_reference</em> = <code>true</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Construct a main context from an existing GMainContext. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>context</em>&nbsp;</td><td>A pointer to a GMainContext. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>owns_reference</em>&nbsp;</td><td>Set <em>true</em> if the initial reference count is owned by this object.</td></tr>
  </table>
</dl>
The <a class="el" href="classXfc_1_1G_1_1MainContext.html">MainContext</a> object takes over the ownership of the GMainContext and unreferences it when the destructor is called. 
</div>
</div><p>
<a class="anchor" name="11febfb9b354f1045bb57636beeb161b"></a><!-- doxytag: member="Xfc::G::MainContext::MainContext" ref="11febfb9b354f1045bb57636beeb161b" args="(GMainContext *context, bool owns_reference=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Xfc::G::MainContext::MainContext           </td>
          <td>(</td>
          <td class="paramtype">GMainContext *&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>owns_reference</em> = <code>true</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Construct a main context from an existing GMainContext. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>context</em>&nbsp;</td><td>A pointer to a GMainContext. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>owns_reference</em>&nbsp;</td><td>Set <em>true</em> if the initial reference count is owned by this object.</td></tr>
  </table>
</dl>
The <a class="el" href="classXfc_1_1G_1_1MainContext.html">MainContext</a> object takes over the ownership of the GMainContext and unreferences it when the destructor is called. 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a7c04d1d7cd2c6e49d1360663fd69378"></a><!-- doxytag: member="Xfc::G::MainContext::pending" ref="a7c04d1d7cd2c6e49d1360663fd69378" args="() const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Xfc::G::MainContext::pending           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks if any sources have pending events for the given context. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><em>true</em> if events are pending. </dd></dl>

</div>
</div><p>
<a class="anchor" name="a2e607e63e0ccac5881eedacfce2990f"></a><!-- doxytag: member="Xfc::G::MainContext::get_poll_func" ref="a2e607e63e0ccac5881eedacfce2990f" args="() const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GPollFunc Xfc::G::MainContext::get_poll_func           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets the poll function set by <a class="el" href="classXfc_1_1G_1_1MainContext.html#9cc66ac314c93b1f05a1e5a3b08d97b7">set_poll_func()</a>. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The poll function. </dd></dl>

</div>
</div><p>
<a class="anchor" name="fdc34ceaaa1d15bed1c020874e9f2259"></a><!-- doxytag: member="Xfc::G::MainContext::get_default" ref="fdc34ceaaa1d15bed1c020874e9f2259" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classXfc_1_1Pointer.html">Pointer</a>&lt;<a class="el" href="classXfc_1_1G_1_1MainContext.html">MainContext</a>&gt; Xfc::G::MainContext::get_default           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets the default main context. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The default main context.</dd></dl>
This is the main context used for main loop functions when a main context is not explicitly specified. 
</div>
</div><p>
<a class="anchor" name="18927522b935969fad0e2bca1a1f47dd"></a><!-- doxytag: member="Xfc::G::MainContext::unref" ref="18927522b935969fad0e2bca1a1f47dd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Xfc::G::MainContext::unref           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Decreases the reference count of the main context by one. 
<p>
When the reference count becomes zero delete is called. Remember, as with all XFC Objects you must call <a class="el" href="classXfc_1_1G_1_1MainContext.html#18927522b935969fad0e2bca1a1f47dd">unref()</a> on a dynamically allocated <a class="el" href="classXfc_1_1G_1_1IOChannel.html">IOChannel</a>, not delete. If you use a smart you don't need to call <a class="el" href="classXfc_1_1G_1_1MainContext.html#18927522b935969fad0e2bca1a1f47dd">unref()</a>, the smart pointer will do that for you. You must also call <a class="el" href="classXfc_1_1G_1_1MainContext.html#18927522b935969fad0e2bca1a1f47dd">unref()</a> on an <a class="el" href="classXfc_1_1G_1_1IOChannel.html">IOChannel</a> allocated on the stack because IOChannels don't get passed on to owner objects that manage their reference count (like widgets in a container). 
<p>
Reimplemented from <a class="el" href="classXfc_1_1Trackable.html#e3755b87fbff5a30350e2bf7492a62a0">Xfc::Trackable</a>.
</div>
</div><p>
<a class="anchor" name="4f2cbbf733fe68d4f44f885330815d68"></a><!-- doxytag: member="Xfc::G::MainContext::iteration" ref="4f2cbbf733fe68d4f44f885330815d68" args="(bool may_block)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Xfc::G::MainContext::iteration           </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>may_block</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Runs a single iteration of the main loop. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>may_block</em>&nbsp;</td><td>Whether the call may block. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><em>true</em> if events were dispatched.</dd></dl>
This involves checking to see if any event sources are ready to be processed, then if no events sources are ready and <em>may_block</em> is true, waiting for a source to become ready, then dispatching the highest priority events sources that are ready. Note that even when <em>may_block</em> is true, it is still possible for <a class="el" href="classXfc_1_1G_1_1MainContext.html#4f2cbbf733fe68d4f44f885330815d68">iteration()</a> to return false, since the the wait may be interrupted for other reasons than an event source becoming ready. 
</div>
</div><p>
<a class="anchor" name="0b987ad023e62077cc96eedd40d2f9f1"></a><!-- doxytag: member="Xfc::G::MainContext::find_source" ref="0b987ad023e62077cc96eedd40d2f9f1" args="(unsigned int source_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classXfc_1_1Pointer.html">Pointer</a>&lt;<a class="el" href="classXfc_1_1G_1_1Source.html">Source</a>&gt; Xfc::G::MainContext::find_source           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>source_id</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Finds a <a class="el" href="classXfc_1_1G_1_1Source.html">Source</a> given the source ID. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>source_id</em>&nbsp;</td><td>The source ID, as returned by attach() or get_id(). </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The <a class="el" href="classXfc_1_1G_1_1Source.html">G::Source</a> if found, otherwise null. </dd></dl>

</div>
</div><p>
<a class="anchor" name="f40acad9a7780c5dd6e90cbbeaf61101"></a><!-- doxytag: member="Xfc::G::MainContext::acquire" ref="f40acad9a7780c5dd6e90cbbeaf61101" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Xfc::G::MainContext::acquire           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Tries to become the owner of the context. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><em>true</em> if the operation succeeded, and this thread is now the owner of the context.</dd></dl>
If some other context is the owner of the context, returns <em>false</em> immediately. Ownership is properly recursive: the owner can require ownership again and will release ownership when <a class="el" href="classXfc_1_1G_1_1MainContext.html#96d62d03a808cb0488effb298360ee60">release()</a> is called as many times as <a class="el" href="classXfc_1_1G_1_1MainContext.html#f40acad9a7780c5dd6e90cbbeaf61101">acquire()</a>.<p>
You must be the owner of a context before you can call <a class="el" href="classXfc_1_1G_1_1MainContext.html#7490dba8a0387ffa44c1c3aea5a9892c">prepare()</a>, <a class="el" href="classXfc_1_1G_1_1MainContext.html#f738f0b385361061d5e8011391e93c0d">query()</a>, <a class="el" href="classXfc_1_1G_1_1MainContext.html#b3b4f42d123e49ed04e665cc812f1881">check()</a> and <a class="el" href="classXfc_1_1G_1_1MainContext.html#b0cfe3c2d33a67d079255cadb375eafb">dispatch()</a>. 
</div>
</div><p>
<a class="anchor" name="96d62d03a808cb0488effb298360ee60"></a><!-- doxytag: member="Xfc::G::MainContext::release" ref="96d62d03a808cb0488effb298360ee60" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Xfc::G::MainContext::release           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Releases ownership of the context previously acquired by this thread with <a class="el" href="classXfc_1_1G_1_1MainContext.html#f40acad9a7780c5dd6e90cbbeaf61101">acquire()</a>. 
<p>
If the context was acquired multiple times, then only release ownership when <a class="el" href="classXfc_1_1G_1_1MainContext.html#96d62d03a808cb0488effb298360ee60">release()</a> is called as many times as it was acquired. 
</div>
</div><p>
<a class="anchor" name="77298979d4d5dda0bc6aea553c0576ee"></a><!-- doxytag: member="Xfc::G::MainContext::wait" ref="77298979d4d5dda0bc6aea553c0576ee" args="(Condition &amp;condition, Mutex &amp;mutex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Xfc::G::MainContext::wait           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classXfc_1_1G_1_1Condition.html">Condition</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>condition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classXfc_1_1G_1_1Mutex.html">Mutex</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>mutex</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Tries to become the owner of the specified context, as with <a class="el" href="classXfc_1_1G_1_1MainContext.html#f40acad9a7780c5dd6e90cbbeaf61101">acquire()</a>, but if another thread is the owner, atomically drop mutex and wait on <em>condition</em> until that owner releases ownership or until <em>conditon</em> is signaled, then try again (once) to become the owner. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>condition</em>&nbsp;</td><td>A condition variable. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mutex</em>&nbsp;</td><td>A mutex, currently held. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><em>true</em> if the operation succeeded, and this thread is now the owner of context. </dd></dl>

</div>
</div><p>
<a class="anchor" name="7490dba8a0387ffa44c1c3aea5a9892c"></a><!-- doxytag: member="Xfc::G::MainContext::prepare" ref="7490dba8a0387ffa44c1c3aea5a9892c" args="(int *priority)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Xfc::G::MainContext::prepare           </td>
          <td>(</td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>priority</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prepares to poll sources within a main loop. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>priority</em>&nbsp;</td><td>The location to store the priority of the highest priority source already ready. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><em>true</em> if some source is ready to be dispatched prior to polling.</dd></dl>
The resulting information for polling is determined by calling <a class="el" href="classXfc_1_1G_1_1MainContext.html#f738f0b385361061d5e8011391e93c0d">query()</a>. 
</div>
</div><p>
<a class="anchor" name="f738f0b385361061d5e8011391e93c0d"></a><!-- doxytag: member="Xfc::G::MainContext::query" ref="f738f0b385361061d5e8011391e93c0d" args="(int max_priority, int *timeout, std::vector&lt; PollFD &gt; &amp;fds)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Xfc::G::MainContext::query           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>max_priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classXfc_1_1G_1_1PollFD.html">PollFD</a> &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>fds</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Determines the information necessary to poll the main loop. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>max_priority</em>&nbsp;</td><td>The maximum priority source to check. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td>The location to store the timeout to be used in polling. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fds</em>&nbsp;</td><td>A vector of <a class="el" href="classXfc_1_1G_1_1PollFD.html">PollFD</a> to store poll records that need to be polled. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><em>true</em> if any records have been stored in the vector. </dd></dl>

</div>
</div><p>
<a class="anchor" name="b3b4f42d123e49ed04e665cc812f1881"></a><!-- doxytag: member="Xfc::G::MainContext::check" ref="b3b4f42d123e49ed04e665cc812f1881" args="(int max_priority, std::vector&lt; PollFD &gt; &amp;fds)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Xfc::G::MainContext::check           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>max_priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classXfc_1_1G_1_1PollFD.html">PollFD</a> &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>fds</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Passes the results of polling back to the main loop. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>max_priority</em>&nbsp;</td><td>The maximum numerical priority of sources to check. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fds</em>&nbsp;</td><td>A vector of <a class="el" href="classXfc_1_1G_1_1PollFD.html">PollFD</a> that was passed to the last call to <a class="el" href="classXfc_1_1G_1_1MainContext.html#f738f0b385361061d5e8011391e93c0d">query()</a>. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><em>true</em> if some sources are ready to be dispatched. </dd></dl>

</div>
</div><p>
<a class="anchor" name="365bf54083e18720dd8f6d4a3f697f15"></a><!-- doxytag: member="Xfc::G::MainContext::add_poll" ref="365bf54083e18720dd8f6d4a3f697f15" args="(PollFD &amp;fd, int priority)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Xfc::G::MainContext::add_poll           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classXfc_1_1G_1_1PollFD.html">PollFD</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>priority</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Adds a file descriptor to the set of file descriptors polled for this context. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fd</em>&nbsp;</td><td>A <a class="el" href="classXfc_1_1G_1_1PollFD.html">PollFD</a> object holding information about a file descriptor to watch. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>priority</em>&nbsp;</td><td>The priority for this file descriptor.</td></tr>
  </table>
</dl>
This will very seldomly be used directly. Instead a typical event source will use G::Source::add_poll() instead. The <em>priority</em> should be the same as the priority used for <a class="el" href="classXfc_1_1G_1_1Source.html#5f0ddf0414711dd1d07daae7a46c9dc3">G::Source::attach()</a> to ensure that the file descriptor is polled whenever the results may be needed. 
</div>
</div><p>
<a class="anchor" name="4617d93b0e174df7cea797d9b7fdeea9"></a><!-- doxytag: member="Xfc::G::MainContext::remove_poll" ref="4617d93b0e174df7cea797d9b7fdeea9" args="(PollFD &amp;fd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Xfc::G::MainContext::remove_poll           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classXfc_1_1G_1_1PollFD.html">PollFD</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>fd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Removes the file descriptor from the set of file descriptors to be polled for the context. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fd</em>&nbsp;</td><td>A <a class="el" href="classXfc_1_1G_1_1PollFD.html">PollFD</a> descriptor previously added with <a class="el" href="classXfc_1_1G_1_1MainContext.html#365bf54083e18720dd8f6d4a3f697f15">add_poll()</a>. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="9cc66ac314c93b1f05a1e5a3b08d97b7"></a><!-- doxytag: member="Xfc::G::MainContext::set_poll_func" ref="9cc66ac314c93b1f05a1e5a3b08d97b7" args="(GPollFunc func)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Xfc::G::MainContext::set_poll_func           </td>
          <td>(</td>
          <td class="paramtype">GPollFunc&nbsp;</td>
          <td class="paramname"> <em>func</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets the function to use to handle the polling of file descriptors. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>func</em>&nbsp;</td><td>The function to call to poll all file descriptors.</td></tr>
  </table>
</dl>
It will be used instead of the poll() system call (or GLib's replacement function, which is used where poll() isn't available). This function could possibly be used to integrate the GLib event loop with an external event loop. 
</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="libXFCcore_2xfc_2glib_2main_8hh.html">libXFCcore/xfc/glib/main.hh</a></ul>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>Xfce Foundation Classes</title>
  <meta content="The XFC Development Team" name="author">
  <link rel="stylesheet" href="doxygen.css" type="text/css">
</head>
<body>
<hr style="width: 100%; height: 1px;" noshade="noshade">
<table style="width: 100%; text-align: left;" border="0" cellpadding="2"
 cellspacing="0">
  <tbody>
    <tr>
      <td style="width: 33%; font-style: italic;"><font size="-1">Copyright
&copy; 2004-2005 The XFC
Development Team</font></td>
      <td style="width: 33%; text-align: right;"><font size="-1">XFC
4.3</font><br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<br>
</body>
</html>
